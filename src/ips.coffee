{ networkInterfaces } = require 'os'

module.exports = ->
  addr = []
  obj = {}

  for name, details of networkInterfaces()
    obj[name] ?= {}

    for { family, internal, address } in details when not internal
      if not address.startsWith '2001'
        obj[name][family] ?= []
        obj[name][family].push { name, address, family }

  for k, v of obj when v.IPv4?
    for s, t of v
      addr.push t...

  addr
