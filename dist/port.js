var net;

net = require('net');

module.exports = function() {
  return new Promise(function(resolve, reject) {
    var server;
    server = net.createServer();
    server.unref();
    server.on('error', reject);
    return server.listen(0, function() {
      var port;
      port = server.address().port;
      return server.close(function() {
        return resolve(port);
      });
    });
  });
};
